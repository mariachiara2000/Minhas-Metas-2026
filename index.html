<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Metas 2026</title>

<style>
:root{
  --bg:#fde8f1;
  --card:#fff;
  --main:#e84d9b;
  --text:#333;
}
.dark{
  --bg:#1f1f25;
  --card:#2a2a33;
  --main:#ff7eb6;
  --text:#eee;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:Arial,sans-serif;
  background:var(--bg);
  color:var(--text);
  min-height:100vh;
}
.hidden{display:none}

.center{
  display:flex;
  align-items:center;
  justify-content:center;
  min-height:100vh;
}

.card{
  background:var(--card);
  padding:24px;
  border-radius:18px;
  width:320px;
  box-shadow:0 20px 40px rgba(0,0,0,.15);
}

input,textarea,select{
  width:100%;
  padding:10px;
  margin:6px 0;
  border-radius:10px;
  border:1px solid #f3bcd7;
}

button{
  padding:10px;
  border:none;
  border-radius:12px;
  background:var(--main);
  color:#fff;
  cursor:pointer;
  margin-top:6px;
}

.app{max-width:1000px;margin:auto;padding:16px}
.top{display:flex;justify-content:space-between;align-items:center}

.section{
  background:var(--card);
  border-radius:18px;
  padding:16px;
  margin-top:16px;
}

.progress{
  height:10px;
  background:#ddd;
  border-radius:10px;
  overflow:hidden;
}
.bar{height:100%;background:var(--main)}

.calendar{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:6px;
  margin-top:10px;
}
.day{
  background:#f7cde3;
  padding:8px;
  border-radius:10px;
  text-align:center;
  cursor:pointer;
}
.day.done{background:#a7e9c7}
.small{font-size:12px;opacity:.7}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="login" class="center">
  <div class="card">
    <h2 style="color:var(--main);text-align:center">Metas 2026</h2>
    <div class="small" style="text-align:center">Entre para acessar suas metas</div>
    <input id="email" placeholder="seu@email.com">
    <input id="pass" type="password" placeholder="Senha">
    <button onclick="login()">Entrar</button>
  </div>
</div>

<!-- APP -->
<div id="app" class="app hidden">

<div class="top">
  <h2>ðŸŒ¸ Metas 2026</h2>
  <div>
    <button onclick="toggleTheme()">ðŸŽ¨</button>
    <button onclick="logout()">Sair</button>
  </div>
</div>

<!-- PROGRESSO ANUAL -->
<div class="section">
  <h3>ðŸ“Š Progresso 2026</h3>
  <div class="progress"><div id="yearBar" class="bar"></div></div>
  <div class="small" id="yearText"></div>
</div>

<!-- METAS -->
<div class="section">
  <h3>ðŸŽ¯ Metas</h3>
  <input id="metaTitle" placeholder="Nova meta">
  <button onclick="addMeta()">Adicionar</button>
  <div id="metaList"></div>
</div>

<!-- PLANNER -->
<div class="section">
  <h3>ðŸ“… Planner</h3>
  <select id="monthSelect" onchange="renderCalendar()">
    <option value="0">Janeiro</option><option value="1">Fevereiro</option>
    <option value="2">MarÃ§o</option><option value="3">Abril</option>
    <option value="4">Maio</option><option value="5">Junho</option>
    <option value="6">Julho</option><option value="7">Agosto</option>
    <option value="8">Setembro</option><option value="9">Outubro</option>
    <option value="10">Novembro</option><option value="11">Dezembro</option>
  </select>
  <div class="calendar" id="calendar"></div>
</div>

</div>

<script>
let metas=JSON.parse(localStorage.getItem("metas"))||[];
let days=JSON.parse(localStorage.getItem("days"))||{};
let theme=localStorage.getItem("theme")||"light";

if(theme==="dark")document.body.classList.add("dark");
if(localStorage.getItem("logged"))showApp();

function login(){
  if(!email.value||!pass.value)return;
  localStorage.setItem("logged",true);
  showApp();
}
function logout(){
  localStorage.clear();
  location.reload();
}
function showApp(){
  login.classList.add("hidden");
  app.classList.remove("hidden");
  renderMetas();
  renderCalendar();
  updateYear();
}

function addMeta(){
  if(!metaTitle.value)return;
  metas.push({title:metaTitle.value,progress:0});
  metaTitle.value="";
  save();renderMetas();updateYear();
}
function renderMetas(){
  metaList.innerHTML="";
  metas.forEach((m,i)=>{
    metaList.innerHTML+=`
    <div>
      ${m.title}
      <div class="progress"><div class="bar" style="width:${m.progress}%"></div></div>
      <button onclick="metas[${i}].progress=Math.min(100,metas[${i}].progress+10);save();renderMetas();updateYear()">+10%</button>
    </div>`;
  });
}

function renderCalendar(){
  calendar.innerHTML="";
  let m=monthSelect.value;
  for(let d=1;d<=31;d++){
    let key=m+"-"+d;
    let done=days[key];
    calendar.innerHTML+=`
      <div class="day ${done?"done":""}" onclick="toggleDay('${key}')">${d}</div>`;
  }
}
function toggleDay(k){
  days[k]=!days[k];
  save();renderCalendar();updateYear();
}

function updateYear(){
  let metaAvg=metas.length?metas.reduce((a,b)=>a+b.progress,0)/metas.length:0;
  let daysDone=Object.values(days).filter(v=>v).length;
  let year=Math.min(100,(metaAvg*0.7)+(daysDone*0.3));
  yearBar.style.width=year+"%";
  yearText.innerText=Math.round(year)+"% do ano planejado";
}

function toggleTheme(){
  document.body.classList.toggle("dark");
  localStorage.setItem("theme",document.body.classList.contains("dark")?"dark":"light");
}

function save(){
  localStorage.setItem("metas",JSON.stringify(metas));
  localStorage.setItem("days",JSON.stringify(days));
}
</script>

</body>
</html>
